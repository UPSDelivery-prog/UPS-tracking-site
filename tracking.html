<script>
async function trackPackage() {
  const num = document.getElementById('trackNumber').value.trim();
  const result = document.getElementById('result');

  if (num === "") {
    result.textContent = "Please enter a valid tracking number.";
    result.style.color = "yellow";
    return;
  }

  // Fetch trackingData.json from GitHub
  try {
    const response = await fetch('./trackingData.json');  // âœ… FIXED FOR GITHUB PAGES
    const data = await response.json();

    if (!data[num]) {
      result.textContent = "Tracking number not found.";
      result.style.color = "yellow";
      document.getElementById('stageWrapper').style.display = 'none';
      return;
    }

    const packageInfo = data[num];

    result.style.color = "white";
    result.textContent = packageInfo.status;

    // Show stages
    document.getElementById("stageWrapper").style.display = "block";

    highlightStage(packageInfo.stage);

  } catch (error) {
    result.textContent = "Error loading tracking data.";
    console.error(error);
  }
}

function highlightStage(stage) {
  const stages = ["stage1", "stage2", "stage3", "stage4"];

  stages.forEach((id, index) => {
    const el = document.getElementById(id);
    if (index < stage) el.classList.add("active");
    else el.classList.remove("active");
  });
}
</script>
